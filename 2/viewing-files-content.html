<section data-intro class="bg-slate-900/20">
  <h2>مقدمه</h2>
  <p>
    در درس قبل با ابزار <i>less</i> برای مشاهده‌ی تعاملی فایل‌های متنی آشنا
    شدیم. <i>less</i> برای زمانی که می‌خواهیم یک فایل طولانی را با حوصله بررسی
    کنیم، صفحات را بالا و پایین ببریم و در آن جستجو کنیم، ابزاری فوق‌العاده است.
    اما فلسفه‌ی لینوکس بر پایه‌ی ابزارهای کوچک و متمرکزی است که هر کدام یک کار
    را به بهترین شکل انجام می‌دهند. برای مشاهده‌ی محتوای فایل‌ها نیز ابزارهای
    متنوعی وجود دارند که هر یک برای یک سناریوی خاص طراحی شده‌اند.
  </p>
  <p>
    گاهی فقط می‌خواهیم نگاهی سریع به کل محتوای یک فایل بیندازیم، یا چند فایل را
    به هم متصل کنیم، یا شاید فقط به چند خط ابتدایی یا انتهایی یک فایل نیاز
    داریم. در این درس، با چند دستور بسیار پرکاربرد دیگر برای کار با محتوای
    فایل‌ها آشنا می‌شویم: cat، tac، <i>head</i> و
    <i>tail</i>. این ابزارها در کنار <i>less</i>، جعبه‌ابزار شما را برای مشاهده
    و مدیریت فایل‌ها در خط فرمان کامل‌تر می‌کنند.
  </p>
</section>
<section>
  <h2>نمایش و اتصال فایل‌ها با cat</h2>
  <p>
    دستور <i>cat</i> یکی از بنیادی‌ترین و پراستفاده‌ترین دستورات در سیستم‌های
    Unix-like است. نام این دستور از واژه‌ی <b>concatenate</b> به معنای «به هم
    پیوستن» گرفته شده است. همانطور که از نامش پیداست، وظیفه‌ی اصلی آن خواندن
    داده‌ها از فایل‌ها و نمایش آن‌ها در خروجی استاندارد (صفحه ترمینال) است.
    ساده‌ترین کاربرد آن، نمایش کامل محتوای یک فایل است.
  </p>

  <pre dir="ltr" data-cm-lang="bash">
$ cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
...</pre
  >

  <p>
    همانطور که می‌بینید، تمام محتوای فایل /etc/passwd بلافاصله در
    ترمینال چاپ می‌شود. اما قدرت واقعی <i>cat</i> زمانی مشخص می‌شود که از آن
    برای الحاق چند فایل به یکدیگر استفاده می‌کنیم. می‌توانیم نام چند فایل را به
    عنوان آرگومان به آن بدهیم تا محتوای همه‌ی آن‌ها را پشت سر هم نمایش دهد.
  </p>

  <h3>گزینه‌های پرکاربرد دستور cat</h3>
  <p>
    دستور <i>cat</i> چند آپشن مفید هم دارد که می‌توانند در شرایط مختلف به کار
    بیایند. در جدول زیر دو مورد از پرکاربردترین آن‌ها را می‌بینید.
  </p>

  <table>
    <tbody>
      <tr>
        <th>آپشن</th>
        <th>توضیح</th>
      </tr>
      <tr>
        <td>-n</td>
        <td>تمام خطوط خروجی را شماره‌گذاری می‌کند (حتی خطوط خالی).</td>
      </tr>
      <tr>
        <td>-b</td>
        <td>فقط خطوطی که خالی نیستند را شماره‌گذاری می‌کند.</td>
      </tr>
    </tbody>
  </table>

  <p>بیایید خروجی دستور را با آپشن -n ببینیم:</p>

  <pre dir="ltr" data-cm-lang="bash">
$ cat -n /etc/passwd
     1	root:x:0:0:root:/root:/bin/bash
     2	daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
     3	bin:x:2:2:bin:/bin:/usr/sbin/nologin
...
  </pre>

  <div data-callout="warning">
    <strong>یک نکته‌ی احتیاطی</strong>
    <p>
      هنگام استفاده از <i>cat</i> مراقب باشید! اگر این دستور را روی یک فایل
      بسیار بزرگ اجرا کنید، کل محتوای آن به سرعت در ترمینال شما سرازیر می‌شود و
      کنترل آن دشوار خواهد بود. بدتر از آن، اجرای <i>cat</i> روی یک فایل باینری
      (مانند یک برنامه‌ی اجرایی یا یک تصویر) باعث می‌شود ترمینال شما با
      کاراکترهای نامفهوم و کدهای کنترلی پر شود که می‌تواند تنظیمات آن را به هم
      بریزد. در این موارد، استفاده از <i>less</i> انتخاب بسیار بهتری است.
    </p>
  </div>
</section>
<section>
  <h2>برعکس‌خوانی فایل‌ها با tac</h2>
  <p>
    دستور <i>tac</i> دقیقاً برعکس <i>cat</i> عمل می‌کند. اگر نام آن را از آخر به
    اول بخوانید، به <i>cat</i> می‌رسید! این دستور محتوای یک فایل را می‌خواند اما
    آن را از خط آخر به خط اول نمایش می‌دهد.
  </p>
  <p>
    این دستور شاید در نگاه اول عجیب به نظر برسد، اما کاربرد بسیار مهمی در تحلیل
    فایل‌های گزارش (Log files) دارد. معمولاً در فایل‌های گزارش، رویدادهای جدید
    به انتهای فایل اضافه می‌شوند. با استفاده از <i>tac</i>، می‌توانید آخرین
    رویدادها را در ابتدای خروجی ببینید بدون اینکه نیازی به اسکرول کردن تا انتهای
    یک فایل طولانی داشته باشید.
  </p>

  <pre dir="ltr" data-cm-lang="bash">
$ tac logfile.log
2025-07-20 03:20:15 - ERROR: Connection failed.
2025-07-20 03:20:10 - INFO: Attempting to connect to database.
2025-07-20 03:19:55 - INFO: Service started.
...
  </pre>
</section>
<section>
  <h2>نگاهی به ابتدای فایل‌ها با head</h2>
  <p>
    گاهی اوقات ما به کل محتوای یک فایل نیاز نداریم و فقط می‌خواهیم ببینیم فایل
    با چه چیزی شروع می‌شود. این کار به ویژه برای شناسایی نوع یا ساختار یک فایل
    بسیار مفید است. دستور <i>head</i>
    دقیقاً برای همین منظور طراحی شده است. به طور پیش‌فرض، این دستور ۱۰ خط اول یک
    فایل را نمایش می‌دهد.
  </p>

  <pre dir="ltr" data-cm-lang="bash">
$ head /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
  </pre>

  <h3>کنترل تعداد خطوط خروجی</h3>
  <p>
    می‌توانیم با استفاده از آپشن -n به دستور <i>head</i> بگوییم که چه
    تعداد خط از ابتدای فایل را نمایش دهد. برای مثال، برای دیدن تنها ۳ خط اول یک
    فایل، به این صورت عمل می‌کنیم:
  </p>

  <pre dir="ltr" data-cm-lang="bash">
$ head -n 3 /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
  </pre>
</section>
<section>
  <h2>مشاهده‌ی انتهای فایل‌ها با tail</h2>
  <p>
    همانطور که <i>head</i> ابتدای فایل را نمایش می‌دهد، دستور <i>tail</i> انتهای
    آن را نشان می‌دهد. این دستور نیز به طور پیش‌فرض ۱۰ خط آخر فایل مشخص‌شده را
    در خروجی چاپ می‌کند. کاربرد اصلی <i>tail</i>، مانند <i>tac</i>، در بررسی
    فایل‌های گزارش است تا آخرین رویدادهای ثبت‌شده را مشاهده کنیم.
  </p>

  <pre dir="ltr" data-cm-lang="bash">
$ tail /var/log/syslog
Jul 20 03:25:01 my-pc CRON[12345]: (root) CMD (cd / &amp;&amp; run-parts --report /etc/cron.hourly)
Jul 20 03:26:11 my-pc systemd[1]: Started Session 12 of user me.
...
  </pre>

  <h3>پایش زنده‌ی فایل‌ها</h3>
  <p>
    یکی از قدرتمندترین و مفیدترین قابلیت‌های دستور <i>tail</i>، آپشن
    -f یا --follow است. وقتی از این آپشن استفاده می‌کنیم،
    <i>tail</i> پس از نمایش ۱۰ خط آخر، به کار خود پایان نمی‌دهد. در عوض، منتظر
    می‌ماند و هر زمان که خط جدیدی به فایل اضافه شود، آن را بلافاصله در ترمینال
    نمایش می‌دهد. این ویژگی برای پایش (monitoring) زنده‌ی فایل‌های گزارش و دنبال
    کردن رویدادها در لحظه، فوق‌العاده کاربردی است.
  </p>

  <p>
    برای مثال، برای مشاهده‌ی زنده‌ی گزارش‌های سیستمی، می‌توانید دستور زیر را
    اجرا کنید:
  </p>

  <pre dir="ltr" data-cm-lang="bash">
$ tail -f /var/log/syslog
  </pre>

  <p>
    پس از اجرای این دستور، ترمینال شما منتظر می‌ماند. هر اتفاق جدیدی که در سیستم
    ثبت شود، خط مربوط به آن در صفحه ظاهر خواهد شد. برای متوقف کردن <i>tail</i> و
    بازگشت به خط فرمان، کافی است کلیدهای Ctrl+C را فشار دهید.
  </p>
</section>
